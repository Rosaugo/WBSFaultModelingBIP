

\section{Verification Method and Experiments}

In this section, we present our experiments on the wheel brake system BIP model conducted. We introduce how we apply Statistic BIP (SBIP) tool chains on verifying stochastic model. We are interested in verifying the safety and other requirements introduced in section A. Through the experiment results, we demonstrate that our verification method can help system engineers improve the role of specification and promote the iteration of the system architecture.

To carry out the experiments, a critical problem is that, since we have integrated various of faulty behaviors into the model, its transitions become fully stochastic. Engineers who use classical model checking algorithms will face with problems caused by stochastic complex components (e.g., state explosion). On the other hand, the classical model checking always gives the answer whether a model meets a given specification or not. But it can not be used to answer whether our faulty behavior model meets any specification for it is pruposely modelled to contain faulty behaviors triggered stochastically. As a better perspective of observation, we'd like to carry out the experiments to answer such kind of questions, e.g.\ \emph{For every time the system runs, what is the probability of failure,} etc. Hence, our verification aim changes from assessing the overall correctness of the entire system to reasoning on system requirements in a quantitative manner.

Our idea is close to those introduced in\cite{smc10,smc10'}. Setting a probability distribution on the internal port \emph{Trigger} which controls the component to behave as a nominal component or component with faulty behaviors. Using SMC engine (SBIP) to give a randomly sampled set of simulations with the selected distribution. Then we estimate the probability that system meets the given specifiction. 

Here comes another problem about the choice and realization of probability distribution, to use statistical model checking techniques to estimate the probability of properties, an authentic probability distribution should be selected. To model the distribution of failure occurrence in our model, SBIP provides two methods. One method is using specific annotations to tag a component port which supports several built-in density functions (normal,gamma,chi-square). Another method is through the use of standard library's function such as \emph{rand()}, or importing external probability distribution function library.

The reminder of this section is organized as follows. First, we introduce serveral categories of standard requirements of WBS in quantitative manner. Then we discuss our choice of probability distribution and estimation methods. Finally, the experimental results for each requirement are presented.

\subsection{WBS Requirements}
The AIR6110 document contains several requirements for the WBS. These can be grouped into two main categories: Requirements corresponding to safety, e.g.\ \emph{the loss of all wheel braking shall be extremely remote}, and others, e.g.\ \emph{the WBS shall have at least two hydraulic pressure sources}.

Safety requirements are divided into the wheel brake system requirements, e.g.\ \emph{Undetected inadvertent wheel braking on one wheel w/o locking during takeoff shall be extremely improbable
}, and subsystem requirements derived from WBS requirements, e.g.\ \emph{Loss of a signal BSCU shall be less than $5.75\times10^{-3}$ per flight}.

Table.~\ref{tab3} gives an overview of several requirements we focus on. These five requirements described in AIR6110 document are designed to be handled through different stages of system development. In some safety requirements such as S18-WBS-R-0321, the precise lower bound of probability of failure (e.g., ``extremely remote") is defined in\cite{ac}.

%The verification of these requirements promotes the iteration of architecture development.

\begin{table}[htbp]
	\caption{WBS requirements specification}
	\begin{center}
		\linespread{1.3}\selectfont
		\resizebox{\textwidth}{22mm}{
		\begin{tabular}{|c|c|c|c|}
			\hline
			{Requirement ID}&{Type}&{Description}&{Trace from}\\
			\hline
			{S18-WBS-R-0321}&{Safety}&{\tabincell{c}{The probability of ``Loss of all wheel braking"\\ shall be extremely remote.}}&{N/A}\\
			\cline{1-4}
			{S18-WBS-R-6108}&{Safety}&{\tabincell{c}{The probability of ``Loss of Normal Brake System\\ Hydraulic Components" shall be less than $3.3\times10^{-5}$ per flight.}}&{N/A}\\
			\cline{1-4}
			{S18-BSCU-R-0002}&{Safety}&{\tabincell{c}{The probability of ``BSCU Fault Causes Loss of\\ Braking Commands" shall be less than $3.3\times10^{-5}$ per flight.}}&{S18-WBS-R-6104}\\
			\hline
			{S18-BSCU-R-0003}&{Safety}&{\tabincell{c}{The probability of ``Loss of a single BSCU"\\ shall be less than $5.75\times10^{-3}$ per flight.}}&{S18-WBS-R-6105}\\
			\cline{1-4}
			{S18-WBS-2975}&{Design Decision}&{\tabincell{c}{The accumulator shall be attached to the\\ blue hydraulic line before the selector valve.}}&{N/A}\\
			\hline
		\end{tabular}
		}
		\label{tab3}
	\end{center}
\end{table}

\subsection{Experiments and results}

%\emph{Stochastic Abstraction.}
The AIR6110 document provides a sample value for every node in fault tree indicating its budgeted probability of occurence. We take this sample as reference and use an invariant constant to represent the failure rate instead of using the common failure rate (e.g., Bathtub curve, Poisson distribution). 

As introduced in this section before, there are two methods to model the distribution of failure occurrence: built-in functions for normal distribution, gamma distribution and chi-square distribution, or library functions imported supporting other kinds of distribution. We choose the random() function from standard library to set probability distribution on the internal port \emph{Trigger}. For example, the budgeted probability of failure ``\emph{Loss of Hydraulic Components}" is asserted to $3.3\times10^{-5}$ per flight. This reflects in the manager component of the compound \emph{Hydraulic Pump} setting its switch probability to $3.3\times10^{-5}$ for each trace during system simulation. Table.~\ref{tab4} shows the budgeted probability of failure occerrence for every component containing faulty behavior.

\emph{Probability Estimation.}
We are mainly interested in estimating the probability that the top level failure (e.g., ``\emph{Loss of wheel braking}") is smaller than the given bound (e.g., ``$3.3\times10^{-5}$"). The SMC engine provides statistical testing algorithm called Probability Estimation (PE)\cite{vmcai04} for stochastic systems verification. It is helpful for engineers to learn the estimated probability of top level failure on every step of complex system development.

We apply our methdology to every modified WBS architecture and here we consider modified WBS ARCH4 which is the most advanced among all the experimented architectures as a sample scenario.
In ARCH4, accumulator is set before the selector to prevent unexpected hydraulic pressure supply. Loss of WBS is caused either through loss of BSCU or due to the physical system does not operate. The top level properties are derived from the requirements and stated as Linear Temporal Logic (LTL) formulas. We use standard library's function \emph{rand()} to realize the uniform distribution\cite{uniform} replacing on the internal port \emph{Trigger}. We use the PE to estimate probabilities for LTL formulas. 

For requirement S18-WBS-R-0321, the SBIP generates 647500 traces in 6 hours, observes no trace with the occurrence of failure ``Loss of all wheel braking", thus we provide the result as ``\emph{not able to conclude}". Comparing with the \emph{confidence} set for PE and the demanding probability for the concept ``extremely remote" defined in\cite{ac}, we basically conclude whether ARCH4 satisfies the requirement S18-WBS-R-0321 can not be defined currently.

For a subsystem requirement S18-BSCU-R-6108, the failure is caused either through loss of BSCU Command System or due to the BSCU Monitor System does not operate. ARCH4 provides a single BSCU with dual command/monitor subsystems inherited from ARCH3. The SBIP generates 235440 traces in 1 hour and 40 minutes, observes 7 traces with the occurrence of failure, giving the rate of $2.97\times10^{-5}$. Comparing with the \emph{confidence}, we conclude that ARCH4 satisfies the requirement S18-BSCU-R-6108.

We provide the whole experiment result with architecture comparion in the next section. Our experiments are performed on a 64-bit Ubuntu 14.04 LTS machine with 2.0Ghz Inter CORE i7-8550U CPU and 2133MHz 16Gb memory, the SBIP version is 2.2.3. Notice that for the limitation of time and hardware, we do not conclude any estimation of probability less than $10^{-7}$ in order of magnitude.

\begin{table}[t]
	\caption{Budgeted probability of failure}
	\begin{center}
		\linespread{1.3}\selectfont
		\begin{tabular}{|c|c|@{}p{0.002\linewidth}<{\centering}@{}|c|}
			\hline
			\multicolumn{2}{|c|}{Failure Component}&&{\tabincell{c}{Budgeted Prob. of\\ Failure Occurrence}}\\
			\hline
			{Power}&{Power Supply}&&{$1.00\times10^{-5}$}\\
			\hline
			{\tabincell{c}{Pumps}}&{\tabincell{c}{Green Hydraulic Pump\\ Blue Hydraulic Pump\\ Accumulator}}&&{$3.30\times10^{-5}$}\\
			\hline
			\multirow{2}*{\tabincell{c}{Valves}}&{\tabincell{c}{Shutoff Valve\\Anti-Skid Valve\\Green Meter Valve\\ Blue Meter Valve}}&&{$1.30\times10^{-5}$}\\
			\cline{2-4}
			&{Selector Valve}&&{$1.30\times10^{-5}$}\\
			\hline
			\multirow{2}*{BSCU}&{BSCU Command Subsystem}&&{$5.75\times10^{-3}$}\\
			\cline{2-4}
			&{BSCU Monitor Subsystem}&&{$5.75\times10^{-3}$}\\
			\hline
		\end{tabular}
		\label{tab4}
	\end{center}
\end{table}

\subsubsection{Architectures Comparison}
Following the methods above, we generate a comparison of all the four architectures on the results of PE as shown in Table.~\ref{tab5}. The overall results are based on the following evaluation criteria: 

\begin{itemize}
	\item Time limit is set to 6 hours.
	\item Each trace contains at least a system execution cycle.
	\item The \emph{precision} of PE is 0.05
	\item The \emph{confidence} of PE is 0.005
	\item The design decision requirement is judged through graphical representation of BIP model or BIP code.
\end{itemize}

We subjectively omit the estimation of BSCU subsystems on ARCH4 due to the reuse of BSCU design between ARCH3 and ARCH4.

\begin{table*}[t]
	\caption{Overall experiment result}
	\begin{center}
		\linespread{1.3}\selectfont
		\begin{tabular}{|c|c|@{}p{0.002\linewidth}<{\centering}@{}|c|c|c|c|c|}
			\hline
			\multicolumn{3}{|c|}{Architectures/Properties}&{Time}&{Traces}&{Nb. failure}&{Probability}&{Pass/Fail}\\
			\hline
			\multirow{5}*{\tabincell{c}{ARCH1}}&{S18-WBS-R-0321}&&{6:00:00}&{1079100}&{1}&{$9.27\times10^{-7}$}&{fail}\\
			\cline{2-8}
			&{S18-WBS-R-6108}&&{1:15:12}&{359700}&{11}&{$3.06\times10^{-5}$}&{pass}\\
			\cline{2-8}
			&{S18-BSCU-R-0002}&&{0:29:31}&{120000}&{694}&{$5.78\times10^{-3}$}&{fail}\\
			\cline{2-8}
			&{S18-BSCU-R-0003}&&{0:29:31}&{120000}&{694}&{$5.78\times10^{-3}$}&{pass}\\
			\cline{2-8}
			&{S18-WBS-2975}&&{-}&{-}&{-}&{-}&{fail}\\
			\hline
			\multirow{5}*{\tabincell{c}{ARCH2}}&{S18-WBS-R-0321}&&{6:00:00}&{925000}&{0}&{0}&{not able to conclude}\\
			\cline{2-8}
			&{S18-WBS-R-6108}&&{1:27:30}&{294300}&{9}&{$3.05\times10^{-5}$}&{pass}\\
			\cline{2-8}
			&{S18-BSCU-R-0002}&&{1:21:00}&{240000}&{8}&{$3.33\times10^{-5}$}&{pass}\\
			\cline{2-8}
			&{S18-BSCU-R-0003}&&{0:42:18}&{120000}&{696}&{$5.80\times10^{-3}$}&{pass}\\
			\cline{2-8}
			&{S18-WBS-2975}&&{-}&{-}&{-}&{-}&{fail}\\
			\hline
			\multirow{6}*{\tabincell{c}{ARCH3}}&{S18-WBS-R-0321}&&{6:00:00}&{647500}&{0}&{0}&{not able to conclude}\\
			\cline{2-8}
			&{S18-WBS-R-6108}&&{1:40:00}&{235440}&{8}&{$3.40\times10^{-5}$}&{pass}\\
			\cline{2-8}
			&{S18-BSCU-R-0002}&&{6:00:00}&{647500}&{0}&{0}&{pass}\\
			\cline{2-8}
			&{S18-BSCU-R-0003}&&{6:00:00}&{647500}&{0}&{0}&{pass}\\
			\cline{2-8}
			&{S18-WBS-2975}&&{-}&{-}&{-}&{-}&{fail}\\
			\hline
			\multirow{3}*{\tabincell{c}{ARCH4}}&{S18-WBS-R-0321}&&{6:00:00}&{647500}&{0}&{0}&{not able to conclude}\\
			\cline{2-8}
			&{S18-WBS-R-6108}&&{1:40:00}&{235440}&{7}&{$2.97\times10^{-5}$}&{pass}\\
			\cline{2-8}
			&{S18-WBS-2975}&&{-}&{-}&{-}&{-}&{pass}\\
			\hline
		\end{tabular}
		\label{tab5}
	\end{center}
\end{table*}

Here we give some architecure comparison, the ARCH1 is a basic architecture, but is also the weakest. It is confirmed with a higher probability of the top level requirement ``S18-WBS-R-0321" than the other three architectures. It also fails to pass the subsystem requirement (e.g., S18-BSCU-R-0002) for it is proposed for assessing architectures in later versions, not ARCH1. It performs well in verifying requirement S18-WBS-R-6108 for this requirement is a check with low level component which is not effected by the iteration of architecture.

We take ARCH2 and ARCH3 together for comparison. After the redundency of BSCU is added to ARCH2 and ARCH3, the two architectures reach the lower limit of probabilities of subsystem requirements. We also find the change from two independent BSCUs to a single BSCU with dual channels does not matter the top level failure rate too much. 

%The time cost of PE process is effected by the scale of architecture model. ARCH1 shows an average of simulating one trace in about 2 seconds.

The comparison of ARCH3 with ARCH4 is through an extra requirement S18-WBS-R-0323 which aims to detect an inadvertent wheel braking occurrence. In the limited estimation process, ARCH3 reports a higher rate of failure occurrence than ARCH4 for this is exactly what the design of ARCH3 lack of. Our experiments confirm the necessity of the iteration from ARCH3 to ARCH4. This interation is also motivated by a design decision requirement S18-WBS-2975, which is only satisfied by the advanced ARCH4.

Due to the limitation of time and hardware, and the characteristics of PE algorithm, we can not conclude any estimation of probability less than $10^{-7}$ in order of magnitude. Thus we can not give an assertion for the requirements with some terminology (e.g., extremely remote) representing the lower bound of its rate.

%\cline{1-4}
%{S18-WBS-R-0323'}&{Safety}&{\tabincell{c}{Inadvertent wheel braking with one wheel locked\\ during takeoff roll before V1 shall be extremely remote }}&{S18-WBS-R-0323}\\
